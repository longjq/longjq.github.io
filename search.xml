<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Elasticsearch]]></title>
    <url>%2F2017%2F07%2F29%2Felastic%2F</url>
    <content type="text"><![CDATA[ʲô��Elasticsearch����Elasticsearch��һЩ˵�� Node���ڵ㣩��������װ��Elasticsearch�������ṩ����ת�ƺ���չ�ķ����� Cluster����Ⱥ����һ����Ⱥ������һ��������node��֯��һ�𣬹�ͬ��������ͬ�����������ݾ��и��ؾ��⹦�ܵļ�Ⱥ Document���ĵ�����һ���ĵ���һ���ɱ������Ļ�����Ϣ��Ԫ Index������������������һ��ӵ�м��������������ĵ����� Type�����ͣ���һ�������У������Զ���һ�ֻ��������� Field���У���Field��Elasticsearch����С��λ���൱�����ݵ�ĳһ�� Shards����Ƭ����Elasticsearch�������ֳ����ɷݣ�ÿ�����־���һ��shard Replicas�����ƣ���Replicas������һ�ݻ����ݿ��� ��һ���Ĺ�ϵ�����ݿ��ĶԱ� ��ϵ�����ݿ⣨����mysql�� �ǹ�ϵ�����ݿ⣨Elasticsearch�� ���ݿ�Database ����Index ��Table ����Type ������Row �ĵ�Document ������Column �ֶ�Field �ܹ�ͼ bulk�������� action����Ϊ�� ���� create ���ĵ�������ʱ���� index �������ĵ����滻���е��ĵ� update �ֲ������ĵ� delete ɾ��һ���ĵ� ����{&quot;delete&quot;:{&quot;_index&quot;:&quot;library&quot;,&quot;_type&quot;:&quot;books&quot;,&quot;_id&quot;:&quot;1&quot;}} ������һЩ�������� 12345678910111213141516171819202122232425POST /librarys/books/_bulk&#123; &quot;index&quot;: &#123; &quot;_id&quot;:1 &#125; &#125;&#123; &quot;title&quot;:&quot;ELASTICSEARCH: THE DEFINETIVE GIDE2&quot;,&quot;price&quot;:5 &#125;&#123; &quot;index&quot;: &#123; &quot;_id&quot;:2 &#125; &#125;&#123; &quot;title&quot;:&quot;ELASTICSEARCH: cookbook2&quot;,&quot;price&quot;:51 &#125;&#123; &quot;index&quot;: &#123; &quot;_id&quot;:3 &#125; &#125;&#123; &quot;title&quot;:&quot;THINK IN PHP2&quot;,&quot;price&quot;:5 &#125;&#123; &quot;index&quot;: &#123; &quot;_id&quot;:4 &#125; &#125;&#123; &quot;title&quot;:&quot;THINK IN PATTERN&quot;,&quot;price&quot;:5 &#125;&#123; &quot;index&quot;: &#123; &quot;_id&quot;:5 &#125; &#125;&#123; &quot;title&quot;:&quot;HELLO WORLD&quot;,&quot;price&quot;:5 &#125;GET /librarys/books/_mget&#123; &quot;ids&quot; : [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;]&#125;POST /librarys/books/_bulk&#123; &quot;delete&quot;: &#123;&quot;_index&quot;: &quot;librarys&quot;, &quot;_type&quot;: &quot;books&quot;, &quot;_id&quot;: &quot;1&quot;&#125; &#125;&#123; &quot;create&quot;: &#123;&quot;_index&quot;: &quot;music&quot;,&quot;_type&quot;:&quot;classical&quot;,&quot;_id&quot;:&quot;1&quot;&#125;&#125;&#123; &quot;title&quot;: &quot;love is forvery&quot;&#125;&#123; &quot;index&quot;: &#123; &quot;_index&quot;: &quot;music&quot;, &quot;_type&quot;: &quot;classical&quot;&#125;&#125;&#123; &quot;title&quot;: &quot;live is forvery&quot;&#125;&#123; &quot;update&quot;: &#123; &quot;_index&quot;:&quot;librarys&quot;,&quot;_type&quot;:&quot;books&quot;,&quot;_id&quot;:&quot;2&quot;&#125;&#125;&#123; &quot;doc&quot;: &#123;&quot;price&quot;:&quot;99999&quot;&#125;&#125; PS:�ύ��Body���ݱ���һ��һ��action������һ��Ϊbody���ݣ��м�����Ҫ��\n���� bulk�����ĵ���С������ֵ ���ݼ�����ÿ���ڵ�����RAM�� ���������ݳ���һ����С����bulk�Ĵ������ܾͻ��½� �ĵ����ݴ�С��Ӳ�����ã��ĵ����Ӷȣ��Լ���ǰ��Ⱥ�����й� PS:�տ�ʼ�����ȴ���Сһ�������ݣ����ݲ����鿴���ܣ�����û�������ټӴ����������� �汾�����ֹ����ͱ��������������ٶ��ᷢ��������ͻ������һ�п���Υ�����������ԵĲ���������������ʱ����������������������һЩ�������� �ֹ������ٶ����ᷢ��������ͻ��ֻ���ύ����ʱ�����Ƿ�Υ�����ݵ������ԣ������ύʱ����Ŀ�걻�޸��ˣ����ύʧ�ܣ�ͬʱ�����������Ĳ�ѯ��������Ϊ��Ҫ�������������ԣ��������ݵ�ʵʱ�Խϲ��ȡ�����ݶ��������������� �ڲ��汾���ⲿ�汾�ڲ��汾���ƣ�ʹ���Դ���_version���͵��������ؼ��֣��޸����ݺ���_version���Զ���1 123456789101112131415161718192021222324252627282930# �½�һ�����ݣ�ע���鿴���ص�_version�ؼ��֣��汾Ϊ1PUT /librarys/books/1&#123; &quot;title&quot;: &quot;Elasticsearch: THE definetive guid&quot;, &quot;name&quot; : &#123; &quot;first&quot;:&quot;longjq&quot;, &quot;last&quot;:&quot;Tong&quot; &#125;, &quot;publish_date&quot;:&quot;2015-12-12&quot;, &quot;price&quot;:59.99&#125;# ��ѯid=1�����ݣ��鿴_version�汾�ֶΣ��汾Ϊ1GET /librarys/books/1# �޸�id=1�������е��ֶΣ��鿴_version�汾���汾Ϊ2��˵�����޸ĳɹ�POST /librarys/books/1/_update&#123; &quot;doc&quot;:&#123; &quot;price&quot;:15 &#125;&#125;# ָ���޸�id=1��version=2�����ݣ�����version=3��˵���޸ĳɹ�POST /librarys/books/1/_update?version=2&#123; &quot;doc&quot;:&#123; &quot;price&quot;:10 &#125;&#125; �ⲿ�汾���ƣ�Ϊ�˱���_version���ⲿ�汾���Ƶ���ֵһ�£�ʹ��version_type=external�ؼ��֣��������ݵ�ǰ��versionֵ�Ƿ�С�������е�versionֵ��ֻ��������versionֵ���������е�versionֵ��ʱ�򣬲����޸ĳɹ� 123456789101112131415161718192021222324# ���ǲ�����ʹ���ⲿ����version_type=external������ָ��id=1��version�İ汾Ϊversion=15�İ汾PUT /librarys/books/1?version=15&amp;version_type=external&#123; &quot;title&quot;: &quot;Elasticsearch: THE definetive guid&quot;, &quot;name&quot; : &#123; &quot;first&quot;:&quot;longjq&quot;, &quot;last&quot;:&quot;Tong&quot; &#125;, &quot;publish_date&quot;:&quot;2015-12-12&quot;, &quot;price&quot;:33.33&#125;# �ⲿ����version�汾�����Ƶİ汾һ��ʱ������ʧ�ܣ�С��Ҳʧ�ܣ����ﲻ��ʾ�������в������ܶ���֮������versionһ��Ҫ���������е�versionֵPUT /librarys/books/1?version=15&amp;version_type=external&#123; &quot;title&quot;: &quot;Elasticsearch: THE definetive guid&quot;, &quot;name&quot; : &#123; &quot;first&quot;:&quot;longjq&quot;, &quot;last&quot;:&quot;Tong&quot; &#125;, &quot;publish_date&quot;:&quot;2015-12-12&quot;, &quot;price&quot;:33.33&#125;GET /librarys/books/1 PS:����versionʱ����ֵ����Ϊ���� Mapping ӳ��ʲô��Mappingӳ������������mysql�ı��ṹ������������ʱ����Ԥ�ȶ��������ֶε������Լ����ص����� PS������û������ӳ���Ļ���Elasticsearch���Զ������������ݣ������ֶε�ӳ�䣬������������Ϊ�ֶ�����ӳ����ϵ ����ʲô�������������ĸ���ϸ�º����� ӳ���ķ�����Ϊ��̬ӳ������̬ӳ�� �ֶ�����ȥ�����鿴 PS:��¼��ѧϰ�ʼǵ�ʱ����ʹ�õ���Elasticsearch 2.3�İ汾 ���½�ͼΪ�����ֶΣ�2.3�汾�����˺ܶ��ֶΣ�����ȥ�����鿴 ���Է���ȥ�����鿴 ���˶����ֶ����ͣ������Ը��ֶ������������� ���������������Է����� �ֶ�������Լ���������������͸�ʽ�����Է����Ǹ���λ�õ��ֶ��������ص����ԣ����Բ�ͬ��������ͬ��Ч����������mysql��default�������������� ��ͼ�ǳ������Է��� ��̬ӳ�� ʲô�Ƕ�̬ӳ�� �ĵ�������һ����ǰû�������ֶ�ʱ����̬ӳ���Զ��������ֶε����ͣ����Ը��ֶ�����ӳ�� �������ö�̬ӳ�� ͨ��dynamic���Խ��п��� true��Ĭ��ֵ����̬�����Զ���false���������Զ���strict������İ���Զ����׳��쳣�� ���÷�Χ �����ڸ������ϻ���object���͵������ֶ��� ������ʾ �����Ͳ鿴ӳ�� 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354# ����ӳ��POST /library&#123; "settings": &#123; "number_of_shards":5, "number_of_replicas": 1 &#125;, "mappings": &#123; "books": &#123; "properties": &#123; "title": &#123; "type": "string" &#125;, "name": &#123; "type": "string", "index": "not_analyzed" &#125;, "publish_date": &#123; "type": "date", "index" : "not_analyzed"&#125;, "price": &#123; "type": "double" &#125;, "number": &#123; "type": "integer" &#125; &#125; &#125; &#125;&#125;# ��̬ӳ��(ע�⣺2.3�İ汾ò���Ѿ��޸ģ��ô������鿴�����ĵ�)PUT /library&#123; "mappings": &#123; "books": &#123; "dynamic": "strict", "properties": &#123; "title": &#123; "type": "string" &#125;, "name": &#123; "type": "string", "index": "not_analyzed" &#125;, "publish_date": &#123; "type": "date", "index" : "not_analyzed"&#125;, "price": &#123; "type": "double" &#125;, "number": &#123; "type": "object", "dynamic": true &#125; &#125; &#125; &#125;&#125;# �鿴library������Ϣ������ӳ����ϢGET /library# ��ȡlibrary����ӳ����ϢGET /library/_mapping# ��ȡlibrary�����µ�booksӳ����ϢGET /library/_mapping/books# ��ȡ������Ⱥ�ڵ�������ϢGET /_all/_mapping# ��ȡ������Ⱥ�ڵ�typeΪbooks��music��ӳ����ϢGET /_all/_mapping/books,music ɾ��ӳ�� 123# ɾ��ӳ��DELETE /library/books/_mappingDELETE /library/_mapping/books ����ӳ�� ���ź���Mappingӳ��һ���������Ͳ����޸ģ����� ֻ���½�����һ��������Ȼ����֮ǰ�����ݵ��뵽�µ������� ————��������—————1.��������������һ�����������Ұ����е�����ָ���������� 1PUT /��������/_alias/����A 2.�´���һ����������������Ҫ��ӳ�� 3.�ѱ���ָ���µ���������ȡ��֮ǰ��������ָ�� 1234567POST /_aliases&#123; &quot;actions&quot;:[ &#123; &quot;remove&quot;: &#123; &quot;index&quot;: &quot;����������&quot;,&quot;alias&quot;: &quot;����A&quot; &#125; &#125;�� &#123; &quot;add&quot;: &#123; &quot;index&quot;: &quot;�½�������&quot;,&quot;alias&quot;: &quot;����A&quot; &#125; &#125;�� ]&#125; ͨ��������������ʵ������ƽ�����ɣ�������ͣ��ִ�� ��ѯ������ѯ����Elasticsearch���ò�ѯ�������в�ѯ���ĵ�������ʾ������ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061GET /library/books/# ָ��index���Լ�type��������GET /library/books/_search?q=title:ELASTICSEARCH# ָ��index��û��type������������type��������GET /library/_search?q=title:ELASTICSEARCH# û��index��Ҳû��type������������index��������GET /_search?q=title:ELASTICSEARCH#------------------------------------------------# term��ѯ# term��ѯ����ѯĳ�ֶ�����ĳ���ؼ��ֵ��ĵ�GET /library/books/_search&#123; "query": &#123; "term": &#123; "preview": "ut" &#125; &#125;&#125;# terms��ѯ����ѯĳ���ֶ��ж����ؼ��ʵ��ĵ�# minimum_match����Сƥ�䣬1 ˵�������ؼ���������Ҫ��һ�� 2 ˵���ĵ��������ؼ��ʱ�������# minimum_match �ò�����2.3�İ汾�в�֧����terms��ʹ���ˣ���ȥ������ѯGET /library/books/_search&#123; "query":&#123; "terms": &#123; "preview": [ "doloremque", "Odit" ], "minimum_match": 2 &#125; &#125;&#125;# -----------------------------------------------GET /library/books/_search?q=title:ELASTICSEARCH# ���Ʋ�ѯ��������# �൱��mysql�е�limit# form �����ĸ�������ʼ���أ�2.3�汾�У����ͱ��������˶�������ȥ������ѯ# size �����巵�������Ľ�����GET /library/books/_search&#123; "from": 0, "size": 20, "query": &#123; "term": &#123; "title": &#123; "value": "ELASTICSEARCH" &#125; &#125; &#125;&#125; ���ϲ�ѯ�Ѷ���������ѯ������һ���ĸ����Բ�ѯ ������ѯͬʱ��ͨ��filter�����ڲ�Ӱ�����ֵ�������ɸѡ����Ҫ������ library���� 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162[ &#123; "title": "minima", "price": 49.45, "preview": "Earum inventore velit quidem incidunt alias rem esse pariatur. Laborum sed quo nulla consectetur voluptatem consequatur delectus. Culpa quo tempora atque explicabo sed officia eos consequatur.", "publish_date": "2011-02-13" &#125;, &#123; "title": "eveniet", "price": 46.59, "preview": "Aliquam necessitatibus nostrum pariatur ut hic. Voluptatum rerum occaecati natus nostrum dolor. Quibusdam omnis quod voluptas nostrum.", "publish_date": "1986-10-27" &#125;, &#123; "title": "voluptatem", "price": 29.99, "preview": "Voluptatem a recusandae inventore error. Ut et beatae nulla enim saepe et. Pariatur fuga quam ut. Ducimus qui ut est ut dolor.", "publish_date": "2012-07-12" &#125;, &#123; "title": "tempore", "price": 74.42, "preview": "Eveniet facilis dolor repellat nesciunt eum quas. Ipsa ab harum et et. Autem fuga voluptas modi omnis ad et. Inventore in autem cum atque molestiae odit perferendis.", "publish_date": "1981-11-26" &#125;, &#123; "title": "voluptatem", "price": 99.97, "preview": "Dolores quis expedita libero id neque. Non est culpa perspiciatis repudiandae deserunt quaerat eius. Quo laboriosam officiis voluptate voluptas quia corporis ut.", "publish_date": "1987-01-05" &#125;, &#123; "title": "dolores", "price": 35.27, "preview": "Porro atque necessitatibus sed doloremque qui. Enim dolores illum dolorum qui incidunt.", "publish_date": "2006-03-19" &#125;, &#123; "title": "pariatur", "price": 22.87, "preview": "Quis facere blanditiis voluptatem at non aperiam ab ut. Voluptatum ipsum necessitatibus et et. Voluptatem culpa quia architecto. Deleniti aut officia temporibus est.", "publish_date": "1982-09-09" &#125;, &#123; "title": "et", "price": 37.13, "preview": "Odit doloremque magni accusamus cupiditate soluta nam assumenda qui. Labore nulla voluptatem reiciendis. Excepturi ex sapiente dolor aut totam provident. Velit et ut adipisci quaerat nihil qui.", "publish_date": "2015-09-25" &#125;, &#123; "title": "maxime", "price": 8.78, "preview": "Quaerat eos repudiandae inventore. Voluptates qui est illum ad sed. Necessitatibus ab pariatur quod.", "publish_date": "2011-10-31" &#125;, &#123; "title": "aspernatur", "price": 40.39, "preview": "Aut quibusdam tempora rerum. Doloremque tempore laborum dolores mollitia fugiat. Nemo blanditiis exercitationem occaecati modi repudiandae.", "publish_date": "2008-01-06" &#125;]]]></content>
      <categories>
        <category>Testing</category>
      </categories>
      <tags>
        <tag>Testing</tag>
        <tag>Another Tag</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2017%2F07%2F29%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
      <categories>
        <category>Testing</category>
      </categories>
      <tags>
        <tag>Testing</tag>
        <tag>Another Tag</tag>
      </tags>
  </entry>
</search>